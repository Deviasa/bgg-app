"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6708],{6708:(E,g,c)=>{c.r(g),c.d(g,{ListPageModule:()=>U});var u=c(177),m=c(4341),l=c(9465),h=c(8986),p=c(467),e=c(3953);function G(n,r){if(1&n&&(e.j41(0,"div",5)(1,"h2"),e.EFF(2),e.k0s(),e.nrm(3,"img",6),e.k0s()),2&n){const s=e.XpG();e.R7$(2),e.JRh(s.selectedGame.name),e.R7$(),e.FS9("alt",s.selectedGame.name),e.Y8G("src",s.selectedGame.thumbnail,e.B4B)}}let k=(()=>{var n;class r{constructor(o){this.modalController=o,this.totalGameList={items:[],total:0},this.numberOfPlayers=0}searchGame(o){const t=this.totalGameList.items.filter(i=>o>=i.minplayers&&o<=i.maxplayers);this.selectedGame=t[Math.floor(Math.random()*t.length)]}closeModal(){this.modalController.dismiss()}}return(n=r).\u0275fac=function(o){return new(o||n)(e.rXU(l.W3))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-game-selection-modal"]],inputs:{totalGameList:"totalGameList"},decls:13,vars:2,consts:[["slot","end"],[3,"click"],["label","Numbers of Players","type","number",3,"ngModelChange","ngModel"],["expand","full",3,"click"],["class","center-content",4,"ngIf"],[1,"center-content"],[3,"src","alt"]],template:function(o,t){1&o&&(e.j41(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),e.EFF(3,"Random Game"),e.k0s(),e.j41(4,"ion-buttons",0)(5,"ion-button",1),e.bIt("click",function(){return t.closeModal()}),e.EFF(6,"X"),e.k0s()()()(),e.j41(7,"ion-content")(8,"ion-item")(9,"ion-input",2),e.mxI("ngModelChange",function(a){return e.DH7(t.numberOfPlayers,a)||(t.numberOfPlayers=a),a}),e.k0s()(),e.j41(10,"ion-button",3),e.bIt("click",function(){return t.searchGame(t.numberOfPlayers)}),e.EFF(11,"Search"),e.k0s(),e.DNE(12,G,4,3,"div",4),e.k0s()),2&o&&(e.R7$(9),e.R50("ngModel",t.numberOfPlayers),e.R7$(3),e.Y8G("ngIf",t.selectedGame))},dependencies:[u.bT,m.BC,m.vS,l.Jm,l.QW,l.W9,l.eU,l.$w,l.uz,l.BC,l.ai,l.su],styles:[".center-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;height:100%}"]}),r})();var b=c(4975),y=c(7291);let L=(()=>{var n;class r{transform(o,t){return(o=o||[]).sort((i,a)=>i[t.property]<a[t.property]?-1*t.order:i[t.property]>a[t.property]?1*t.order:0)}}return(n=r).\u0275fac=function(o){return new(o||n)},n.\u0275pipe=e.EJ8({name:"sort",type:n,pure:!0}),r})();const C=(n,r)=>({property:n,order:r}),F=n=>({"--background":n,color:"black"}),M=n=>({"--ion-item-background":n});function P(n,r){if(1&n&&(e.j41(0,"div",26),e.EFF(1),e.k0s()),2&n){const s=e.XpG();e.R7$(),e.JRh(s.errorMessage)}}function S(n,r){if(1&n){const s=e.RV6();e.j41(0,"div")(1,"ion-button",27),e.bIt("click",function(){const t=e.eBV(s).$implicit,i=e.XpG();return e.Njj(i.removeUser(t))}),e.EFF(2),e.k0s()()}if(2&n){const s=r.$implicit,o=e.XpG();e.R7$(),e.Y8G("ngStyle",e.eq3(2,F,o.getColorForUsername(s))),e.R7$(),e.SpI("",s," x")}}function v(n,r){if(1&n&&(e.j41(0,"ion-item",28)(1,"ion-grid")(2,"ion-row")(3,"ion-col",29)(4,"ion-thumbnail"),e.nrm(5,"img",30),e.k0s()(),e.j41(6,"ion-col",31),e.EFF(7),e.k0s(),e.j41(8,"ion-col",29),e.EFF(9),e.k0s(),e.j41(10,"ion-col",29),e.EFF(11),e.k0s(),e.j41(12,"ion-col",29),e.EFF(13),e.k0s(),e.j41(14,"ion-col",29),e.EFF(15),e.k0s(),e.j41(16,"ion-col",29),e.EFF(17),e.k0s()()()()),2&n){const s=r.$implicit,o=e.XpG();e.Y8G("ngStyle",e.eq3(8,M,o.getColorForUsername(s.user))),e.R7$(5),e.FS9("src",s.thumbnail,e.B4B),e.R7$(2),e.JRh(s.name),e.R7$(2),e.JRh(s.minplayers),e.R7$(2),e.JRh(s.maxplayers),e.R7$(2),e.JRh(s.minplaytime),e.R7$(2),e.JRh(s.maxplaytime),e.R7$(2),e.JRh(s.yearpublished)}}const R=[{path:"",component:(()=>{var n;class r{constructor(o,t,i,a){this.bggApi=o,this.bggStorage=t,this.alertController=i,this.modalController=a,this.username="",this.usernames=[],this.totalGameList={items:[],total:0},this.colors=["#AAAA00","#FFAABB","#44BB99","#99DDFF","#EE8866","#EEDD88","#77AADD","#BBCC33"],this.usernameColors=[],this.errorMessage=null,this.descending=!1,this.order=1,this.column="name"}ngOnInit(){this.bggStorage.get("gameList").then(o=>{localStorage.length>0?this.loadStoredUsers():null!=o?this.userGameList=o:this.bggStorage.get("username")&&this.loadGameList(this.bggStorage.get("username"))})}loadStoredUsers(){const o=[];for(let t=0;t<localStorage.length;t++){const i=localStorage.key(t);if(i&&i.startsWith("Username-")){const a=i.split("-"),d=a[1],f=a[a.length-1];o.push(f);const _=JSON.parse(localStorage.getItem(i));this.totalGameList.items=[...this.totalGameList.items,..._.items],this.usernameColors.push({username:f,color:d}),this.totalGameList.total+=_.total,this.bggStorage.set("gameList",this.totalGameList)}}this.usernames=o}sort(o){this.descending=!this.descending,this.order=this.descending?1:-1,this.column=o}loadGameList(o){this.bggApi.getUserCollection(o).subscribe(t=>{if(t&&console.log("res: ",t),null!==t){var i;if(void 0===t.total)return void(this.errorMessage=t.toString());if(this.errorMessage=null,0===t.total)return void this.showAlert("No games found for user.");if(this.usernames.length>=8)return void this.showAlert("Maximum number of collections reached.");if(this.usernames.includes(o))return void this.showAlert(`Collection for user ${o} already exists.`);this.addUser(o);const a={items:t.items.map(d=>({...d,user:o})),total:t.total};this.userGameList=a,this.totalGameList.items=[...this.totalGameList.items,...a.items],this.totalGameList.total+=a.total,this.bggStorage.set("gameList",this.totalGameList),localStorage.setItem("Username-"+(null===(i=this.usernameColors.find(d=>d.username===o))||void 0===i?void 0:i.color)+"-"+o,JSON.stringify(this.totalGameList))}})}showAlert(o){var t=this;return(0,p.A)(function*(){yield(yield t.alertController.create({header:"Warning",message:o,cssClass:"warning-alert",buttons:[{text:"OK",cssClass:"button-alert-warning"}]})).present()})()}addUser(o){this.usernames.push(o),this.setColorForUsername(o)}removeUser(o){var t;this.usernames=this.usernames.filter(i=>i!==o),this.filterItems(o),localStorage.removeItem("Username-"+(null===(t=this.usernameColors.find(i=>i.username===o))||void 0===t?void 0:t.color)+"-"+o)}filterItems(o){this.totalGameList.items=this.totalGameList.items.filter(t=>t.user!==o)}getColorForUsername(o){let t=this.usernameColors.find(i=>i.username===o);return t?t.color:"#fff"}setColorForUsername(o){const t=this.usernames.indexOf(o);this.usernameColors.push({username:o,color:this.colors[t%this.colors.length]})}openGameSelectionModal(o){var t=this;return(0,p.A)(function*(){yield(yield t.modalController.create({component:k,componentProps:{totalGameList:o}})).present()})()}}return(n=r).\u0275fac=function(o){return new(o||n)(e.rXU(b.W),e.rXU(y.D),e.rXU(l.hG),e.rXU(l.W3))},n.\u0275cmp=e.VBU({type:n,selectors:[["app-list"]],decls:43,vars:16,consts:[[3,"translucent"],["slot","start"],[3,"fullscreen"],["collapse","condense"],["size","large"],[3,"keyup.enter"],["type","text","label"," Username:","placeholder","Enter Username","fill","solid","name","username",3,"ngModelChange","clearInput","clearOnEdit","ngModel"],["fill","solid",3,"click"],["slot","end"],["fill","solid","color","tertiary",3,"click"],["class","error-message",4,"ngIf"],[2,"display","flex","flex-direction","row","gap","10px"],[4,"ngFor","ngForOf"],["size","1",1,"header-list"],["size","5",1,"header-list",3,"click"],["size","1","id","min-player-icon",1,"header-list"],["title","Minimal Player","name","person-outline",3,"click"],["size","1","id","max-player-icon",1,"header-list"],["title","Maximal Player","name","people-outline",3,"click"],["size","1","id","min-playtime-icon",1,"header-list"],["title","Minimal Playtime","name","time-outline",3,"click"],["size","1","id","max-playtime-icon",1,"header-list"],["title","Maximal Playtime","name","time",3,"click"],["size","1","id","year-published-icon",1,"header-list"],["title","Year Published","name","calendar-outline",3,"click"],[3,"ngStyle",4,"ngFor","ngForOf"],[1,"error-message"],["size","small",3,"click","ngStyle"],[3,"ngStyle"],["size","1"],["alt","",3,"src"],["size","5",1,"game-name"]],template:function(o,t){1&o&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),e.nrm(3,"ion-menu-button"),e.k0s(),e.j41(4,"ion-title"),e.EFF(5,"Game List"),e.k0s()()(),e.j41(6,"ion-content",2)(7,"ion-header",3)(8,"ion-toolbar")(9,"ion-title",4),e.EFF(10,"List"),e.k0s()()(),e.j41(11,"form",5),e.bIt("keyup.enter",function(){return t.loadGameList(t.username)}),e.j41(12,"ion-input",6),e.mxI("ngModelChange",function(a){return e.DH7(t.username,a)||(t.username=a),a}),e.k0s(),e.j41(13,"ion-toolbar")(14,"ion-buttons",1)(15,"ion-button",7),e.bIt("click",function(){return t.loadGameList(t.username)}),e.EFF(16,"Load Game List"),e.k0s()(),e.j41(17,"ion-buttons",8)(18,"ion-button",9),e.bIt("click",function(){return t.openGameSelectionModal(t.totalGameList)}),e.EFF(19,"Random Game"),e.k0s()()(),e.DNE(20,P,2,1,"div",10),e.k0s(),e.j41(21,"div",11),e.DNE(22,S,3,4,"div",12),e.k0s(),e.j41(23,"ion-list"),e.nrm(24,"ion-list-header"),e.j41(25,"ion-item")(26,"ion-grid")(27,"ion-row"),e.nrm(28,"ion-col",13),e.j41(29,"ion-col",14),e.bIt("click",function(){return t.sort("name")}),e.EFF(30,"Name"),e.k0s(),e.j41(31,"ion-col",15)(32,"ion-icon",16),e.bIt("click",function(){return t.sort("minplayers")}),e.k0s()(),e.j41(33,"ion-col",17)(34,"ion-icon",18),e.bIt("click",function(){return t.sort("maxplayers")}),e.k0s()(),e.j41(35,"ion-col",19)(36,"ion-icon",20),e.bIt("click",function(){return t.sort("minplaytime")}),e.k0s()(),e.j41(37,"ion-col",21)(38,"ion-icon",22),e.bIt("click",function(){return t.sort("maxplayers")}),e.k0s()(),e.j41(39,"ion-col",23)(40,"ion-icon",24),e.bIt("click",function(){return t.sort("yearpublished")}),e.k0s()()()()(),e.DNE(41,v,18,10,"ion-item",25),e.nI1(42,"sort"),e.k0s()()),2&o&&(e.Y8G("translucent",!0),e.R7$(6),e.Y8G("fullscreen",!0),e.R7$(6),e.AVh("error",t.errorMessage),e.Y8G("clearInput",!0)("clearOnEdit",!0),e.R50("ngModel",t.username),e.R7$(8),e.Y8G("ngIf",t.errorMessage),e.R7$(2),e.Y8G("ngForOf",t.usernames),e.R7$(19),e.Y8G("ngForOf",e.i5U(42,10,null==t.totalGameList?null:t.totalGameList.items,e.l_i(13,C,t.column,t.order))))},dependencies:[u.Sq,u.bT,u.B3,m.qT,m.BC,m.cb,m.vS,m.cV,l.Jm,l.QW,l.hU,l.W9,l.lO,l.eU,l.iq,l.$w,l.uz,l.nf,l.AF,l.MC,l.ln,l.Zx,l.BC,l.ai,l.Gw,L],styles:["ion-col[_ngcontent-%COMP%]{text-align:center}.game-name[_ngcontent-%COMP%]{text-align:left}.header-list[_ngcontent-%COMP%]{font-weight:700}ion-thumbnail[_ngcontent-%COMP%]{--size: 40px;--border-radius: 20px}ion-popover[_ngcontent-%COMP%]{--backdrop-opacity: 0;font-size:small}.error-message[_ngcontent-%COMP%]{color:var(--ion-color-danger)}ion-input.error[_ngcontent-%COMP%]{--color: var(--ion-color-danger)}ion-item[_ngcontent-%COMP%]{--highlight-color-focused: none}ion-input[_ngcontent-%COMP%]:focus-within{--highlight-color: black}"]}),r})()}];let j=(()=>{var n;class r{}return(n=r).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[h.iI.forChild(R),h.iI]}),r})();var I=c(4856);let U=(()=>{var n;class r{}return(n=r).\u0275fac=function(o){return new(o||n)},n.\u0275mod=e.$C({type:n}),n.\u0275inj=e.G2t({imports:[u.MD,m.YN,l.bv,j,I.eN]}),r})()}}]);